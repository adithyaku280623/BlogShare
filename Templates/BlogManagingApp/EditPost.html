{% extends 'BASE.html' %}
{% load static %}

{% block title %}Edit Post{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'CSS/BlogManagingApp/EditPost.CSS' %}">
{% endblock %}

{% block content %}
<form method="POST" enctype="multipart/form-data" class="post-detail-wrapper" style="position:relative;">
    {% csrf_token %}

    <!-- Exit button inside form -->
    <div class="form-header d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-purple m-0">Edit Post</h2>
        <a href="{% url 'PostDetail' post.id %}" class="btn-close" aria-label="Close"></a>
    </div>

    <div class="post-bottom-section">
        <!-- Left: Image -->
        <div class="post-image-card">
            <img id="postImagePreview"
                 src="{% if post.image %}{{ post.image.url }}{% else %}{% static 'images/default.png' %}{% endif %}"
                 alt="{{ post.title }}">

            <!-- Hidden file input -->
            <input type="file" id="imageInput" name="image" style="display:none;">

            <!-- Overlay camera icon -->
            <div class="image-overlay" id="imageOverlay">
                <i class="bi bi-camera-fill"></i>
            </div>
        </div>

        <!-- Right: Title, Subject, Content & Button -->
        <div class="post-detail-info">
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="{{ post.title }}" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="subject">Subject:</label>
                <input type="text" id="subject" name="subject" value="{{ post.subject }}" class="form-control" required>
            </div>

            <div class="form-group">
                <label for="content">Content:</label>
                <textarea id="content" name="content" rows="10" class="form-control">{{ post.content }}</textarea>
            </div>

            <button type="submit" class="btn btn-confirm">Update Post</button>
        </div>
    </div>
</form>


{% block extra_js %}
<script src="{% static 'JS/BlogManagingApp/EditPost.JS'%}"></script>
{% endblock %}
{% endblock %}
